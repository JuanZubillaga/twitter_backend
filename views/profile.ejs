<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/styles.css" />
    <!-- CSS Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div id="sidebar-profile" class="col-4 d-flex justify-content-end border-end"><%-include ("partials/sidebar") %></div>
        <div class="col-4 border-end border-start p-0">
          <div class="ps-4">
            <!-- <% if (checkingOwnProfile) { %>
          <h6>Echa un vistazo a tu perfil:</h6>
          <% } else { %>
            <h6>Echa un vistazo al perfil de <%= wantedUser.username %>:</h6>
            <% } %> -->
            <div class="border-bottom border-top mt-0 mb-3">
              <h4 style="font-weight: 80px">
                <%= wantedUser.firstname %> <%= wantedUser.lastname %>
              </h4>
              <span><%= wantedUser.tweets.length %> tweets </span>
            </div>
          </div>

          <div class="ps-4">
            <div id="foto-boton-perfil">
              <div>
                <img
                  id="avatar-profile"
                  src="/img/<%= wantedUser.avatar %>"
                  alt="avatar"
                  height="150px"
                  width="150px"
                />
              </div>

              <div id="editar-seguir">
                <% if(!checkingOwnProfile && !alreadyFollowing ){ %>
                <a href="/follow/<%= wantedUser.username %>"
                  ><button class="btn btn-light rounded-pill">Seguir</button></a
                >
                <% } %> <% if(!checkingOwnProfile && alreadyFollowing ){ %>
                <a href="/unfollow/<%= wantedUser.username %>"
                  ><button class="btn btn-light rounded-pill">Dejar de seguir</button></a
                >
                <% } %> <% if (checkingOwnProfile) { %>
                <div id="btn-editar">
                  <a class="btn btn-light rounded-pill" href="/editar/<%= wantedUser.username %> "
                    >Editar perfil</a
                  >
                </div>

                <% } %>
              </div>
            </div>

            <div class="mt-3 mb-3">
              <h5><%= wantedUser.firstname %> <%= wantedUser.lastname %></h5>
              <span  style="color: rgb(165, 162, 162);" >@<%= wantedUser.username %></span>
            </div>

            <span>
              <a style="color: rgb(165, 162, 162);" href="/siguiendo/<%= wantedUser.username %> "
                ><%= wantedUser.following.length %> Siguiendo
              </a></span
            ><span
              ><a style="color: rgb(165, 162, 162);" href="/seguidores/<%= wantedUser.username %> ">
                <%= wantedUser.followers.length %> Seguidores</a
              ></span
            >
             
              <p "><%= wantedUser.bio %></p>
            
          </div>
          <div class="ps-4">
          <% if (wantedUser.tweets.length === 0) { %>
            <p>No hay publicaciones hasta la fecha</p>
            <% } else { %>
            <h6>Tweets</h6>
            <% for(const tweet of wantedTweets) { %>
            <div class="mt-3 mb-3">
              <p><%= tweet.content %></p>
              <p><%= tweet.formattedDate %></p>
            </div>

            <% if (!tweet.likes.includes(loggedUser.id)) { %>
            <a style="color: rgb(255, 106, 196)" href="/like/<%= tweet._id %> "
              ><i class="far fa-heart"></i
            ></a>
            <span style="color: rgb(255, 106, 196)"><%= tweet.likes.length %> </span>

            <% } else { %>
            <a style="color: rgb(255, 106, 196)" href="/like/<%= tweet._id %> "
              ><i class="fas fa-heart"></i
            ></a>
            <span style="color: rgb(255, 106, 196)"><%= tweet.likes.length %> </span>
            <% } %> <% if (checkingOwnProfile) { %><a
              class="ms-4"
              style="color: #1c9cf4"
              href="/tweet/<%= tweet.id %>"
              ><i class="fas fa-trash"></i
            ></a>
            <% } %>
            <hr />
            <% } %> <% } %>
        </div>
          
          
        </div>
        <div class="col-4">
          <div id="whoToFollow"  > 
            <h5 class="p-3">Cuentas a seguir:</h5>
            <div>

              <% for(const recommendedUser of recommendedUsers) { %>
                <div class="mb-3 d-flex justify-content-between">
                  <div class="ms-3 align-items-center"><a href="/profile/<%= recommendedUser.username %> ">
                    <img
                    id="avatar-colleft"
                      src="/img/<%= recommendedUser.avatar %> "
                      alt="avatar"
                      width="80px"
                      height="80px"
                    />
                    <p>@<%= recommendedUser.username %></p>
                  </a></div>
                
                 
                
                  <div class="me-5 d-flex align-items-center"> 
                    <a href="/follow/<%= recommendedUser.username %> "
                    ><button class="btn btn-dark rounded-pill">Seguir</button></a>
                </div>
               </div>
              <% } %>
           </div>
          </div>
      </div>
      </div>
     </div>
    </div>
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"
          ></script>
  </body>
</html>
