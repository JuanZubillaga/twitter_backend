<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/styles.css" />
    <!-- CSS Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div id="sidebar-profile" class="col-3"><%-include ("partials/sidebar") %></div>
        <div class="col-6">
          <img
            id="avatar-profile"
            src="/img/<%= wantedUser.avatar %>"
            alt="avatar"
            height="150px"
            width="150px"
          />
          <!-- <% if (checkingOwnProfile) { %>
          <h6>Echa un vistazo a tu perfil:</h6>
          <% } else { %>
            <h6>Echa un vistazo al perfil de <%= wantedUser.username %>:</h6>
            <% } %> -->
          <div class="mt-3 mb-3">
            <h4 style="font-weight: 80px">
              <%= wantedUser.firstname %> <%= wantedUser.lastname %>
            </h4>
            <span><%= wantedUser.tweets.length %> tweets </span>
          </div>

          <% if(!checkingOwnProfile && !alreadyFollowing ){ %>
          <a href="/follow/<%= wantedUser.username %>"
            ><button class="btn btn-primary">Seguir</button></a
          >
          <% } %> <% if(!checkingOwnProfile && alreadyFollowing ){ %>
          <a href="/unfollow/<%= wantedUser.username %>"
            ><button class="btn btn-primary">Dejar de seguir</button></a
          >
          <% } %> <% if (checkingOwnProfile) { %>
          <a class="btn btn-primary" href="/editar/<%= wantedUser.username %> ">Editar perfil</a>
          <% } %>

          <div class="mt-3 mb-3">
            <h5><%= wantedUser.firstname %> <%= wantedUser.lastname %></h5>
            <span>@<%= wantedUser.username %></span>
          </div>

          <span>
            <a href="/siguiendo/<%= wantedUser.username %> "
              ><%= wantedUser.following.length %> Siguiendo
            </a></span
          ><span
            ><a href="/seguidores/<%= wantedUser.username %> ">
              <%= wantedUser.followers.length %> Seguidores</a
            ></span
          >

          <ul>
            <li><%= wantedUser.firstname %></li>
            <li><%= wantedUser.lastname %></li>
            <li><%= wantedUser.username %></li>
            <li><%= wantedUser.email %></li>
            <li><%= wantedUser.bio %></li>
          </ul>
          <% if (wantedUser.tweets.length === 0) { %>
          <p>No hay publicaciones hasta la fecha</p>
          <% } else { %>
          <h6>Publicaciones:</h6>
          <% for(const tweet of wantedTweets) { %>
          <div class="mt-3 mb-3">
            <p><%= tweet.content %></p>
            <p>a <%= tweet.createdAt %></p>
          </div>
          <% if (checkingOwnProfile) { %>
          <form action="/tweet/<%= tweet.id %>?_method=DELETE " method="post">
            <button type="submit" class="btn btn-danger">Eliminar</button>
          </form>
          <% } %> <% if (!tweet.likes.includes(loggedUser.id)) { %>
          <a href="/like/<%= tweet._id %> "
            ><button class="btn btn-outline-primary">Me gusta</button></a
          >
          <span style="color: blue"><%= tweet.likes.length %> </span>
          <% } else { %>
          <a href="/like/<%= tweet._id %> "><button class="btn btn-primary">Me gusta</button></a>
          <span style="color: blue"><%= tweet.likes.length %> </span>
          <% } %>
          <hr />
          <% } %> <% } %>
          <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"
          ></script>
        </div>
        <div class="col-3">Columna 3</div>
      </div>
    </div>
  </body>
</html>
