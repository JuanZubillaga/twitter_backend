<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <%- include ("partials/sidebar") %>
    <a href="/profile/<%= loggedUser.username %>">
      <img src="/img/<%= loggedUser.avatar %>" alt="avatar" height="150px" width="150px"
    /></a>
    <form action="/tweet" method="post">
      <div class="mb-3">
        <textarea
          name="tweet"
          class="form-control"
          id="bio"
          rows="3"
          placeholder="¿Qué está pasando?"
        ></textarea>
        <button type="submit" class="btn btn-primary">Twittear</button>
      </div>
    </form>
    <h5>Tus tweets:</h5>
    <% for(const tweet of ownTweets) { %>
    <div class="mt-3 mb-3">
      <p><%= tweet.content %></p>
      <p>a <%= tweet.createdAt %></p>
    </div>

    <a href="/deleteTweet/<%= tweet.id %> "><button class="btn btn-danger">Eliminar</button></a>
    <% if (!tweet.likes.includes(loggedUser.id)) { %>
    <a href="/like/<%= tweet._id %> "><button class="btn btn-outline-primary">Me gusta</button></a>
    <span style="color: blue"><%= tweet.likes.length %> </span>
    <% } else { %>
    <a href="/like/<%= tweet._id %> "><button class="btn btn-primary">Me gusta</button></a>
    <span style="color: blue"><%= tweet.likes.length %> </span>
    <% } %>
    <hr />
    <% } %>
    <h5>
      Hola <%= loggedUser.firstname %>! Te extrañamos! Echa un vistazo a lo que han twitteado tus
      cuentas de interés:
    </h5>
    <% for(const tweet of wantedTweets) { %>
    <div class="mb-3">
      <a href="profile/<%= tweet.user.username %> ">
        <img src="/img/<%= tweet.user.avatar %>" alt="avatar" height="80px" width="80px"
      /></a>
      <a href="/unfollow/<%= tweet.user.username %>" class="btn btn-primary">Dejar de seguir</a>
    </div>
    <h6><%= tweet.user.username %> publicó:</h6>
    <p><%= tweet.content %></p>
    <p>a <%= tweet.createdAt %></p>
    <% if (!tweet.likes.includes(loggedUser.id)) { %>
    <a href="/like/<%= tweet._id %> "><button class="btn btn-outline-primary">Me gusta</button></a>
    <span style="color: blue"><%= tweet.likes.length %> </span>
    <% } else { %>
    <a href="/like/<%= tweet._id %> "><button class="btn btn-primary">Me gusta</button></a>
    <span style="color: blue"><%= tweet.likes.length %> </span>
    <% } %>
    <hr />
    <% } %>
    <h5>Cuentas a seguir:</h5>
    <% for(const recommendedUser of recommendedUsers) { %>
    <div class="mb-3">
      <a href="profile/<%= recommendedUser.username %> ">
        <img src="/img/<%= recommendedUser.avatar %> " alt="avatar" width="80px" height="80px" />
        <h6><%= recommendedUser.username %></h6>
      </a>
      <a href="follow/<%= recommendedUser.username %> "
        ><button class="btn btn-primary">Seguir</button></a
      >
    </div>
    <% } %>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
